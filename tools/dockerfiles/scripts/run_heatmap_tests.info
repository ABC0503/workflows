============================================================================================
Gene list from RNA-Seq experiment #6756 grouped by isoforms
============================================================================================

select tableName,type from ems.genelist where id='Qbdcb6a6-a77a-4b7f-8bea-07cdd91d9f66';
+----------------------------------+------+
| tableName                        | type |
+----------------------------------+------+
| Qbdcb6a6a77a4b7f8bea07cdd91d9f66 |    2 |
+----------------------------------+------+

describe experiments.Qbdcb6a6a77a4b7f8bea07cdd91d9f66;
+---------------+--------------+------+-----+---------+-------+
| Field         | Type         | Null | Key | Default | Extra |
+---------------+--------------+------+-----+---------+-------+
| refseq_id     | varchar(100) | NO   |     | NULL    |       |
| gene_id       | varchar(100) | NO   |     | NULL    |       |
| chrom         | varchar(255) | NO   |     | NULL    |       |
| txStart       | int(11)      | YES  |     | NULL    |       |
| txEnd         | int(11)      | YES  |     | NULL    |       |
| strand        | varchar(1)   | YES  |     | NULL    |       |
| RPKM genelist | double       | YES  |     | NULL    |       |
+---------------+--------------+------+-----+---------+-------+








============================================================================================
Gene list from RNA-Seq experiment #6756 grouped by genes
============================================================================================

select tableName,type from ems.genelist where id='lcbd3756-cec9-443f-946d-62ee1a8aa5fc';
+----------------------------------+------+
| tableName                        | type |
+----------------------------------+------+
| lcbd3756cec9443f946d62ee1a8aa5fc |    2 |
+----------------------------------+------+

describe experiments.lcbd3756cec9443f946d62ee1a8aa5fc;
+---------------+--------------+------+-----+---------+-------+
| Field         | Type         | Null | Key | Default | Extra |
+---------------+--------------+------+-----+---------+-------+
| refseq_id     | mediumtext   | YES  |     | NULL    |       |
| gene_id       | varchar(100) | NO   |     | NULL    |       |
| chrom         | varchar(255) | YES  |     | NULL    |       |
| txStart       | int(11)      | YES  |     | NULL    |       |
| txEnd         | int(11)      | YES  |     | NULL    |       |
| strand        | varchar(1)   | YES  |     | NULL    |       |
| RPKM genelist | double       | YES  |     | NULL    |       |
+---------------+--------------+------+-----+---------+-------+








============================================================================================
Gene list from RNA-Seq experiment #6756 grouped by common tss
============================================================================================

select tableName,type from ems.genelist where id='g3112a87-163b-4d28-97a5-01931bf28421';
+----------------------------------+------+
| tableName                        | type |
+----------------------------------+------+
| g3112a87163b4d2897a501931bf28421 |    2 |
+----------------------------------+------+

describe experiments.g3112a87163b4d2897a501931bf28421;
+---------------+--------------+------+-----+---------+-------+
| Field         | Type         | Null | Key | Default | Extra |
+---------------+--------------+------+-----+---------+-------+
| refseq_id     | mediumtext   | YES  |     | NULL    |       |
| gene_id       | mediumtext   | YES  |     | NULL    |       |
| chrom         | varchar(255) | NO   |     |         |       |
| txStart       | int(11)      | YES  |     | NULL    |       |
| txEnd         | int(11)      | YES  |     | NULL    |       |
| strand        | varchar(1)   | YES  |     | NULL    |       |
| RPKM genelist | double       | YES  |     | NULL    |       |
+---------------+--------------+------+-----+---------+-------+








============================================================================================
Gene list from DESeq results grouped by isoforms
============================================================================================

select tableName,type from ems.genelist where id='Yb6494e2-8571-457f-df3a-d0a4b83bb799';
+----------------------------------+------+
| tableName                        | type |
+----------------------------------+------+
| Yb6494e28571457fdf3ad0a4b83bb799 |    2 |
+----------------------------------+------+

describe experiments.Yb6494e28571457fdf3ad0a4b83bb799;
+--------------------------------+---------------+------+-----+---------+-------+
| Field                          | Type          | Null | Key | Default | Extra |
+--------------------------------+---------------+------+-----+---------+-------+
| refseq_id                      | varchar(1000) | NO   |     | NULL    |       |
| gene_id                        | varchar(500)  | NO   |     | NULL    |       |
| chrom                          | varchar(45)   | NO   |     | NULL    |       |
| txStart                        | int(11)       | YES  |     | NULL    |       |
| txEnd                          | int(11)       | YES  |     | NULL    |       |
| strand                         | varchar(1)    | YES  |     | NULL    |       |
| Rpkm_u                         | float         | YES  |     | NULL    |       |
| Rpkm_t                         | float         | YES  |     | NULL    |       |
| LOG2R KO_vs_WT_isoforms_cwl_2  | float         | YES  |     | NULL    |       |
| pvalue KO_vs_WT_isoforms_cwl_2 | float         | YES  |     | NULL    |       |
| padj KO_vs_WT_isoforms_cwl_2   | float         | YES  |     | NULL    |       |
+--------------------------------+---------------+------+-----+---------+-------+







============================================================================================
Gene list from DESeq results grouped by genes
============================================================================================

select tableName,type from ems.genelist where id='W38740ca-50a9-47ad-c4bd-4bd82aa4c645';
+----------------------------------+------+
| tableName                        | type |
+----------------------------------+------+
| W38740ca50a947adc4bd4bd82aa4c645 |    2 |
+----------------------------------+------+

describe experiments.W38740ca50a947adc4bd4bd82aa4c645;
+-----------------------------+---------------+------+-----+---------+-------+
| Field                       | Type          | Null | Key | Default | Extra |
+-----------------------------+---------------+------+-----+---------+-------+
| refseq_id                   | varchar(1000) | NO   |     | NULL    |       |
| gene_id                     | varchar(500)  | NO   |     | NULL    |       |
| chrom                       | varchar(45)   | NO   |     | NULL    |       |
| txStart                     | int(11)       | YES  |     | NULL    |       |
| txEnd                       | int(11)       | YES  |     | NULL    |       |
| strand                      | varchar(1)    | YES  |     | NULL    |       |
| Rpkm_u                      | float         | YES  |     | NULL    |       |
| Rpkm_t                      | float         | YES  |     | NULL    |       |
| LOG2R KO_vs_WT_genes_cwl_2  | float         | YES  |     | NULL    |       |
| pvalue KO_vs_WT_genes_cwl_2 | float         | YES  |     | NULL    |       |
| padj KO_vs_WT_genes_cwl_2   | float         | YES  |     | NULL    |       |
+-----------------------------+---------------+------+-----+---------+-------+







============================================================================================
Gene list from DESeq results grouped by common tss
============================================================================================

select tableName,type from ems.genelist where id='q3124d31-5e78-4fdb-d809-1d7d20b11934';

+----------------------------------+------+
| tableName                        | type |
+----------------------------------+------+
| q3124d315e784fdbd8091d7d20b11934 |    2 |
+----------------------------------+------+

describe experiments.q3124d315e784fdbd8091d7d20b11934;

+---------------------------+---------------+------+-----+---------+-------+
| Field                     | Type          | Null | Key | Default | Extra |
+---------------------------+---------------+------+-----+---------+-------+
| refseq_id                 | varchar(1000) | NO   |     | NULL    |       |
| gene_id                   | varchar(500)  | NO   |     | NULL    |       |
| chrom                     | varchar(45)   | NO   |     | NULL    |       |
| txStart                   | int(11)       | YES  |     | NULL    |       |
| txEnd                     | int(11)       | YES  |     | NULL    |       |
| strand                    | varchar(1)    | YES  |     | NULL    |       |
| Rpkm_u                    | float         | YES  |     | NULL    |       |
| Rpkm_t                    | float         | YES  |     | NULL    |       |
| LOG2R KO_vs_WT_tss_cwl_2  | float         | YES  |     | NULL    |       |
| pvalue KO_vs_WT_tss_cwl_2 | float         | YES  |     | NULL    |       |
| padj KO_vs_WT_tss_cwl_2   | float         | YES  |     | NULL    |       |
+---------------------------+---------------+------+-----+---------+-------+




Average Tag Density

    ems/app/view/Project2/ATDPChart.js
        EMS.view.charts.ATDP
            ems/app/store/ATDPChart.js
                data/ATDPChart.php


Gene Body Average Tag Density                       gets data from      me.initialConfig.store

    ems/app/view/Project2/ATDPBChart.js
        EMS.view.charts.ATDPB
            ems/app/controller/Project2.js          gets data from      var stor = this.getATDPHeatAStore();
                ems/app/store/ATDP.js
                    data/ATDP.php
                        $query_array=selectSQL("SELECT * FROM `atdp` where genelist_id like ? order by tbl1_id, tbl2_id",array("s",$ID));


Tag Density Heatmap                                 gets data from      me.initialConfig.store

    ems/app/view/Project2/ATDPHChart.js
        ems/app/controller/Project2.js              gets data from      var stor = this.getATDPHeatAStore();
            data/ATDPHeatA.php
                $command = "{$BIN}/atdp --avd_guid=\"{$uid}\" -log=\"{$TMP}/atdpheat.log\" --avd_heat_window=\"200\" -sam_twicechr=\"chrX chrY\" -sam_ignorechr=\"chrM\" -avd_window=5000 -avd_bsmooth=40 -avd_smooth=200 ";
                $output = shell_exec("$command 2>>{$TMP}/atdpheatERROR.log");
                print_r($output);


Both "Gene Body Average Tag Density" and "Tag Density Heatmap" uses the results of "atdp" program




Testing for c5B8B343-8D68-EC25-537C-4EED30465EB7

select a.pltname, tbl1_id, tbl2_id, l.fragmentsize, l.tagsmapped, g2.tableName, g.tableName, g2.name,g.name from atdp a, genelist g, genelist g2, labdata l where a.genelist_id='c5B8B343-8D68-EC25-537C-4EED30465EB7' and g.labdata_id=l.id and a.tbl1_id=g.id and a.tbl2_id=g2.id;

+---------+--------------------------------------+--------------------------------------+--------------+------------+----------------------------------+--------------------------------------+------------+--------------------------+
| pltname | tbl1_id                              | tbl2_id                              | fragmentsize | tagsmapped | tableName                        | tableName                            | name       | name                     |
+---------+--------------------------------------+--------------------------------------+--------------+------------+----------------------------------+--------------------------------------+------------+--------------------------+
| test    | Zc1c2670-e865-4bb8-9dce-baf82147b75e | lcbd3756-cec9-443f-946d-62ee1a8aa5fc |          157 |   23897709 | lcbd3756cec9443f946d62ee1a8aa5fc | YE377FED-F6B6-0806-F56D-D13E017F4A11 | 6756_genes | p300 (WangS) Mouse_input |
+---------+--------------------------------------+--------------------------------------+--------------+------------+----------------------------------+--------------------------------------+------------+--------------------------+



select * from experiments.`lcbd3756cec9443f946d62ee1a8aa5fc` where chrom not like '%\\_%' and chrom not like '%control%' limit 10;

+--------------------------------------------------------------------------------------------------------+---------------+-------+-----------+-----------+--------+---------------------+
| refseq_id                                                                                              | gene_id       | chrom | txStart   | txEnd     | strand | RPKM genelist       |
+--------------------------------------------------------------------------------------------------------+---------------+-------+-----------+-----------+--------+---------------------+
| NR_038165,NR_038166                                                                                    | 0610005C13Rik | chr7  |  45567794 |  45575176 | -      |  1.7518399953842163 |
| NR_038186                                                                                              | 0610007N19Rik | chr15 |  32240567 |  32244662 | -      | 0.42707300186157227 |
| NM_021446                                                                                              | 0610007P14Rik | chr12 |  85815454 |  85824545 | -      |   6.100359916687012 |
| NR_027970                                                                                              | 0610008F07Rik | chr2  | 163493803 | 163541721 | -      | 0.05181410163640976 |
| NR_037995                                                                                              | 0610009B14Rik | chr12 |  80686374 |  80692466 | -      |                   0 |
| NM_025319                                                                                              | 0610009B22Rik | chr11 |  51685384 |  51688634 | -      |   3.708620071411133 |
| NM_025323                                                                                              | 0610009D07Rik | chr12 |   4817607 |   4827659 | +      |   11.52649974822998 |
| NR_038126                                                                                              | 0610009L18Rik | chr11 | 120348677 | 120351190 | +      |  0.3175390064716339 |
| NM_024179                                                                                              | 0610009O20Rik | chr18 |  38250248 |  38262629 | +      |   4.860320091247559 |
| NM_001177543,NM_001177543_dup1,NM_001177543_dup2,NM_001177543_dup3,NM_001177543_dup4,NM_001177543_dup5 | 0610010B08Rik | chr2  | 176619932 | 176636319 | -      |                   0 |
+--------------------------------------------------------------------------------------------------------+---------------+-------+-----------+-----------+--------+---------------------+









